version: '3'
services:
#  db:
#    image: mysql:8.0.28
#    restart: always
#    container_name: mysql
#    tty: true
#    environment:
#      MYSQL_DATABASE: reactdb
#      MYSQL_USER: user
#      MYSQL_PASSWORD: pass
#      MYSQL_ROOT_PASSWORD: root
#    volumes:
#      - ./mysqldata:/var/lib/mysql/
#    network_mode: host

  api:
    restart: always  
    build:
      dockerfile: Dockerfile
      context: ./API
    volumes: 
      - /app/node_modules
      - ./API:/app
    network_mode: host

  app:
    build:
      dockerfile: Dockerfile
      context: ./my-react-app
    volumes:
      - /app/node_modules
      - ./my-react-app:/app
      - ./my-react-app/nginx:/etc/nginx/conf.d
    network_mode: host
